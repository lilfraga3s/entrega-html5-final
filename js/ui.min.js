// ui.js - toasts, modal and accessibility toggles const UI = (function(){ function init(){ // hamburger document.querySelectorAll('.btn-hamburger').forEach(btn=>{ btn.addEventListener('click', ()=>{ const nav = document.querySelector('.nav-list'); nav.classList.toggle('open'); const expanded = btn.getAttribute('aria-expanded')==='true'; btn.setAttribute('aria-expanded', !expanded); }); }); // accessibility toggles const btnDark = document.getElementById('toggle-dark'); const btnContrast = document.getElementById('toggle-contrast'); if(btnDark){ btnDark.addEventListener('click', toggleDark); btnDark.addEventListener('keydown', keyToggle); } if(btnContrast){ btnContrast.addEventListener('click', toggleContrast); btnContrast.addEventListener('keydown', keyToggle); } } function keyToggle(e){ if(e.key === 'Enter' || e.key===' '){ e.preventDefault(); e.target.click(); } } function toggleDark(){ const el = document.getElementById('dark-stylesheet'); const pressed = this.getAttribute('aria-pressed')==='true'; el.disabled = pressed; this.setAttribute('aria-pressed', (!pressed).toString()); } function toggleContrast(){ const el = document.getElementById('high-contrast-stylesheet'); const pressed = this.getAttribute('aria-pressed')==='true'; el.disabled = pressed; this.setAttribute('aria-pressed', (!pressed).toString()); } function showToast(message, type='success', timeout=4000){ const area = document.getElementById('toast-area'); if(!area) return; const toast = document.createElement('div'); toast.className = 'toast ' + (type==='danger'?'danger':'success'); toast.innerHTML = '<div class="toast-message">'+message+'</div>'; area.appendChild(toast); setTimeout(()=>toast.classList.add('visible'),20); setTimeout(()=>{ toast.classList.remove('visible'); setTimeout(()=>toast.remove(),300); }, timeout); } function openModal(id){ const modal = document.getElementById(id); if(!modal) return; modal.setAttribute('aria-hidden','false'); modal.querySelector('.modal-dialog')?.focus(); document.body.style.overflow='hidden'; } function closeModal(id){ const modal=document.getElementById(id); if(!modal) return; modal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; } return { init, showToast, openModal, closeModal }; })();